<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ToDo 리스트 1단계</title>
  <style>
    .done {
      text-decoration: line-through;
    }
  </style>
  
</head>
<body>
  <h2>오늘의 할 일 ✏️</h2>

  <input id="todoInput" type="text" placeholder="할 일을 입력하세요" />
  <button id="addTodo">추가</button>

  <ul id="todoList"></ul>


  <script>

    const todoList = document.getElementById('todoList')
    const i = makeTodoItem('숙제하기')

    todoList.appendChild(i)

    const todoInput = document.getElementById('todoInput')
    const addTodo = document.getElementById('addTodo')

        // local storage 저장

    let todos = []
    
    const savedTodos = localStorage.getItem('todos')

    if(savedTodos) {
      todos = JSON.parse(savedTodos)

      todos.forEach( (todo) => {
        const li = makeTodoItem(todo)
        todoList.appendChild(li)
      })
    }

// 세트 추가

    function makeTodoItem(text) {
      const li = document.createElement('li')
      li.className = 'li'

      const span = document.createElement('span')
      span.className = 'span'
      span.textContent = text

      const fButton = document.createElement('button')
      fButton.className = 'fButton'
      fButton.textContent = '완료'

      const dButton = document.createElement('button')
      dButton.className = 'dButton'
      dButton.textContent = '삭제'

      const eButton = document.createElement('button')
      eButton.className = 'eButton'
      eButton.textContent = '수정'

      li.appendChild(span)
      li.appendChild(fButton)
      li.appendChild(dButton)
      li.appendChild(eButton)

      return (li)

    }

    // Todo 내용 채우기

    function insideTodo () {
      const text = todoInput.value.trim()

      if(text === '') return;

      const i = makeTodoItem(text)

      todoList.appendChild(i)

      todos.push(text);
      console.log(todos)

      todoInput.value = ''
      todoInput.focus()

      localStorage.setItem('todos', JSON.stringify(todos))
    }

    // input에 넣고 추가 버튼 눌렀을 때 리스트에 새 항목이 추가되게 하기

    addTodo.addEventListener('click', () => {
      
      insideTodo()
      
    })

    //완료 버튼을 누르면(단, ul에 이벤트를 건다.) -> done 토글 -> 

    todoList.addEventListener('click', (event) => {
      if (event.target.classList.contains('fButton')) {
        event.target.parentElement.classList.toggle('done')
      }
    }) 

    //삭제 버튼을 누르면 (단, ul에 이벤트를 건다. ) -> 삭제  

    todoList.addEventListener('click', (event) => {
      if (event.target.classList.contains('dButton')) {
        event.target.parentElement.remove()
      }
    })

    // Enter 눌러도 추가되게 하기 

    todoInput.addEventListener('keyup', (event) => {
      if ( event.key === 'Enter' ) {

      event.preventDefault();
      insideTodo();

      }
    })

    // 수정 버튼 추가하기

    
    




  </script>
</body>
</html>