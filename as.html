<h2>appending</h2>

<input id="workoutInput" placeholder="ì˜ˆ: í‘¸ì‰¬ì—… 30ê°œ" />
<button id="addBtn">ì¶”ê°€</button>
<button id="removeBtn">ë§ˆì§€ë§‰ ì œê±°</button>
<ul id="workoutList"></ul>

<script>

  const workoutList = document.getElementById('workoutList')
  const workoutInput = document.getElementById('workoutInput')
  const removeBtn = document.getElementById('removeBtn')
  const addBtn = document.getElementById('addBtn')

  function styleApply() {
    if (s.done) {
      li.style.textDecoration = 'line-through'
      li.style.opacity = '0.5'
    } else {
      li.style.textDecoration = 'none'
      li.style.opacity = '1'
    }
  }



  // ðŸ§© TODO (ë„ˆê°€ ìž‘ì„±)

  // 1) RAM = [] ë§Œë“¤ê¸°
  // 2) localStorage.getItem('workouts') ë¡œ ì €ìž¥ëœ ê¸°ë¡ ê°€ì ¸ì˜¤ê¸°
  // 3) JSON.parse â†’ RAMì— ë„£ê¸°
  // 4) ì €ìž¥ëœ ê¸°ë¡ë“¤ì„ lië¡œ ë Œë”ë§
  // 5) ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ
  //      - input.value ì½ê³ 
  //      - RAM.push()
  //      - li ë§Œë“¤ì–´ì„œ í™”ë©´ì— í‘œì‹œ
  //      - localStorage.setItem() ì €ìž¥
  //
  // 6) ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ
  //      - RAM.pop()
  //      - í™”ë©´ì—ì„œ ë§ˆì§€ë§‰ li ì œê±°
  //      - localStorage ë‹¤ì‹œ ì €ìž¥
  //

  let RAM = [] // ë„í™”ì§€ ë§Œë“¤ê¸° ( í™”ë©´ì— ë³´ì´ëŠ”ê±´ ì•„ë‹˜, í™”ë©´ì— ë³´ì´ë ¤ë©´ appendchild to workoutList )

  const dataLine = localStorage.getItem('workouts') // ì €ìž¥ì†Œì—ì„œ ë°ì´í„° "ë¬¸ìžì—´" ê°€ì ¸ì˜¤ê¸°

  if (dataLine) {
    RAM = JSON.parse(dataLine) // ë°ì´í„° "ë¬¸ìžì—´"ì„ "ë°°ì—´"ë¡œ ë°”ê¾¸ê³  -> ë„í™”ì§€ì— ë„£ê¸°

    RAM.forEach( (s) => { // ë°ì´í„° "ë°°ì—´"ì„ í•˜ë‚˜ì”© ëŒì•„ë‹¤ë‹ˆë©´ì„œ liì— í•˜ë‚˜ì”© í• ë‹¹í•¨
      const li = document.createElement('li') // ê°ê°œ "li" ë§Œë“¤ê¸°
      li.textContent = s // ë°°ì—´ ìš”ì†Œ í•˜ë‚˜ë‹¹ li í•˜ë‚˜ì”© í• ë‹¹í•˜ê¸° + í™”ë©´ì— í‘œì‹œí•˜ê¸°

      const btn = document.createElement('button')
      btn.textContent = 'X'
      btn.addEventListener('click', () => {
        li.remove()

        const index = RAM.indexOf(s)
        if(index !== -1 ) {
          RAM.splice(index, 1)
          localStorage.setItem('workouts', JSON.stringify(RAM))
        }
      })

      workoutList.appendChild(li)
      li.appendChild(btn)

      li.addEventListener('click', () => {
        s.done = !s.done
        styleApply()
        localStorage.setItem('workouts', JSON.stringify(RAM))
      })
    })
  }

  //ì¶”ê°€ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ 
  
  addBtn.addEventListener('click', () => {
    const getInput = workoutInput.value // ìž…ë ¥ì°½ì—ì„œ ê°’ ê°€ì ¸ì˜¤ê¸°

    RAM.push({text : getInput, done : false}) // ë„í™”ì§€ì— ìž…ë ¥í•œê±° pushí•˜ê¸°

    const li = document.createElement('li') // ê°ê°œ li ë§Œë“¤ê¸°
    li.textContent = getInput // ê°ê°œ li ì— ìž…ë ¥ê°’ í• ë‹¹í•˜ê¸°
    workoutList.appendChild(li) // ul ì— Li ë„£ê¸°
    localStorage.setItem('workouts', JSON.stringify(RAM)) // ì €ìž¥ì†Œì— ì €ìž¥í•˜ê¸°

    const btn = document.createElement('button')
      btn.textContent = 'X'
      btn.addEventListener('click', () => {
        li.remove()

        const index = RAM.indexOf(getInput)
        if(index !== -1 ) {
          RAM.splice(index, 1)
          localStorage.setItem('workouts', JSON.stringify(RAM))
        }
      })

      workoutList.appendChild(li)
      li.appendChild(btn)
  })

  // ì‚­ì œ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ

  removeBtn.addEventListener('click', () => {

    if (RAM.length === 0) return ;

    RAM.pop()
    
    const lastLi = workoutList.lastElementChild
    lastLi.remove()

    localStorage.setItem('workouts',JSON.stringify(RAM))
  })

</script>